{% extends 'blog/base.html' %}
{% block title %}Login{% endblock %}

{% block content %}
<style>
    /* body {
    background: linear-gradient(135deg, #fdf6e3, #dcefe1);
    font-family: 'Quicksand', 'Poppins', sans-serif;
    color: #333;
  } */

  .animated-form {
  background: #ffffff;
  padding: 2.5rem;
  border-radius: 1rem;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
  animation: fadeSlideIn 0.5s ease forwards;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.3s ease;
  border: 1.5px solid #b9b9b9;
}

@keyframes fadeSlideIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.form-control {
  border: 1.5px solid #ccc;
  border-radius: 0.6rem;
  background-color: #fefefe;
  color: #333;
  padding: 0.75rem 1rem;
  font-size: 1rem;
  font-weight: 500;
  transition: all 0.3s ease;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
}

.form-control:focus {
  border-color: green;
  background-color: #ffffff;
  box-shadow: 0 0 0 3px green;
  outline: none;
}

.form-floating > label {
  font-size: 1rem;
  color: #555;
  font-weight: 500;
  letter-spacing: 0.3px;
  transition: color 0.3s ease;
}

/* Buttons */
.btn-animate {
  font-family: 'Merriweather','Segoe UI', 'Roboto', sans-serif;
  background-color: green;
  color: #ffffff;
  font-weight: 600;
  font-size: 1rem;
  padding: 0.65rem 1.5rem;
  border-radius: 8px;
  border: none;
  transition: all 0.3s ease;
}

.btn-animate:hover {
  background-color: darkgreen;
  color: #fff;
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.1);
}

a {
  color: green;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.3s ease;
}

a:hover {
  color:darkgreen;
  text-decoration: underline;
}
</style>

<div class="d-flex justify-content-center align-items-center" style="min-height: 80vh;">
  <div class="animated-form col-md-5" id="loginForm">
    <h2 class="text-center mb-4 d-flex justify-content-center align-items-center gap-2">
      <i class="fa-solid fa-seedling text-success"></i>
      <span style="font-family: 'Merriweather','Georgia', serif; font-weight: bold;">Welcome Back ðŸ‘‹</span>
      <i class="fa-solid fa-magic text-warning"></i>
    </h2>

    <form method="post" novalidate>
      {% csrf_token %}
      
      <div class="form-floating mb-3">
        {{ form.username }}
        <label for="id_username">Username or Email</label>
      </div>

      <div class="form-floating mb-3">
        {{ form.password }}
        <label for="id_password">Password</label>
        {% if not form.errors %}
        <span class="fa-solid fa-eye toggle-password" data-target="id_password" style="position: absolute; top: 30%; right: 1rem; transform: translateY(-50%); cursor: pointer;">
        </span>
        {% endif %}
        <p class="mt-3 mb-0">
          <a href="{% url 'password_reset_request' %}">Forgot password?</a>
        </p>
      </div>

      <button class="btn btn-primary w-100 mt-2 btn-animate shadow-sm" type="submit">Login</button>

      <p class="mt-3 text-center" style="font-weight:500; font-size:0.95rem;">
        No account? <a href="{% url 'custom_register' %}">Sign up</a>
      </p>
    </form>
  </div>
</div>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

{% if form.errors %}
<script>
    Swal.fire({
        toast: true,
        icon: 'error',
        title: `{% if form.non_field_errors %}{{ form.non_field_errors.0|escapejs }}{% elif form.username.errors %}{{ form.username.errors.0|escapejs }}{% elif form.password.errors %}{{ form.password.errors.0|escapejs }}{% else %}Login failed{% endif %}`,
        position: 'top',
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        showClass: {
            popup: 'swal2-show slideInDown faster'
        },
        hideClass: {
            popup: 'swal2-hide fadeOutUp faster'
        }
    });
</script>
{% endif %}
{% endblock %}
