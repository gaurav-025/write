{% extends "blog/base.html" %}
{% load static %}
{% block title %}{{ post.title }} - Write{% endblock %}

{% block content %}

<style>

body {
  font-family: 'Merriweather', sans-serif;
  background-color: #ffffff;
  color: #1e1e1e;
}

.post-container {
  /* display: flex; */
  justify-content: center;
  padding: 3rem 1rem;
}

.post-title {
  font-size: 2.75rem;
  font-weight: 700;
  color: #222;
  text-align: left;
  margin-bottom: 1.5rem;
}


.post-meta {
  font-size: 1rem;
  color: #858585;
  margin-bottom: 2rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.post-content {
  font-size: 1.05rem;
  line-height: 1.9;
  color: #333;
  overflow-wrap: break-word;
}

.post-content h2,
.post-content h3 {
  margin-top: 2.5rem;
  color: #2a2a2a;
}

.post-content img {
  max-width: 70%;
  /* border-radius: 12px; */
  margin: 2rem 0;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
  transition: transform 0.3s ease;
}

.post-content img:hover {
  transform: scale(1.015);
}

.post-tags {
  margin-top: 2.5rem;
  padding-top: 1rem;
  border-top: 1px solid #ddd;
}

.post-tags strong {
  font-size: 0.95rem;
  color: #555;
}

.post-tags .badge {
  display: inline-block;
  background:green;
  color: #fff;
  padding: 0.4rem 0.8rem;
  border-radius: 999px;
  font-size: 0.85rem;
  margin: 0.25rem 0.4rem 0 0;
  transition: background-color 0.25s;
}

.post-tags .badge:hover {
  background: darkgreen;
}

.comment-section {
  margin-top: 4rem;
  padding: 2rem 0;
  font-family: 'Merriweather', serif;
  border-top: 1px solid #e0e0e0;
}

.comment-section h4,
.comment-section h5 {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1e1e1e;
  margin-bottom: 1.5rem;
}

.comment-box {
  background-color: #fafafa;
  border: 1px solid #ddd;
  border-left: 4px solid #1e88e5;
  padding: 1rem 1.25rem;
  margin-bottom: 1.25rem;
  border-radius: 0.25rem;
}

.comment-box p {
  margin-bottom: 0.3rem;
}

.comment-box .comment-meta {
  font-size: 0.8rem;
  color: #777;
}

.comment-box .comment-body {
  font-size: 1rem;
  color: #222;
  margin-top: 0.5rem;
  line-height: 1.6;
}

.comment-form textarea {
  width: 100%;
  border: 1px solid #ccc;
  border-radius: 0.25rem;
  padding: 0.75rem;
  font-size: 1rem;
  font-family: 'Merriweather', serif;
  resize: vertical;
  background-color: #fff;
  color: #1e1e1e;
  transition: border-color 0.25s ease;
}

.comment-form textarea:focus {
  border-color: #1e88e5;
  outline: none;
}

.comment-form button {
  background-color: green;
  color: #fff;
  font-size: 0.95rem;
  font-weight: 500;
  border-radius: 0.25rem;
  padding: 0.5rem 1.25rem;
  border: none;
  margin-top: 0.75rem;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out;
}

.comment-form button:hover {
  background-color: darkgreen;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
<link rel="stylesheet" href="{% static 'css/markdown.css' %}">

<div class="post-container">
  <article class="post-wrapper animate__animated animate__fadeIn">
    <h1 class="post-title">{{ post.title }}</h1>
    {% if request.user == post.author %}
    <p><a href="{% url 'edit_post' post.pk %}" class="btn btn-sm btn-outline-primary">
      <i class="fas fa-edit me-1"></i> Edit
    </a></p>
  
{% endif %}
    <p class="post-meta">
      <i class="fas fa-user me-1"></i> {{ post.author.username }} &middot;
      <i class="fas fa-calendar-alt me-1"></i> {{ post.created_at|date:"F j, Y, G:i" }} &middot;
      <i class="fas fa-clock me-1"></i> {{ post.read_time }} &middot;
    </p>
<hr class="mt-0">
    <div id="postContent" class="post-content">
      {{ post.content_html|safe }}
    </div>

    {% if post.tags.exists %}
  <div class="post-tags">
    <strong>Tags:</strong><br>
    {% for tag in post.tags.all %}
      <span class="badge rounded-pill">{{ tag.name }}</span>
    {% endfor %}
  </div>
{% else %}
  <div class="post-tags">
    <strong>Tags:</strong><br>
    <span class="text-muted">No tags</span>
  </div>
{% endif %}
  </article>
</div>
<!-- <hr class="mt-5"> -->
<div class="comment-section">
  <h4><i class="fas fa-comments me-2"></i> Comments ({{ comments.count }})</h4>

  {% for comment in comments %}
    <div class="comment-box">
      <p class="mb-1"><i class="fas fa-user me-1"></i> {{ comment.user.username }}</p>
      <p class="comment-meta"><i class="fas fa-calendar-alt me-1"></i> {{ comment.created_at|date:"F j, Y, G:i" }}</p>
      <p class="comment-body"><i class="fas fa-comment-dots me-2 text-muted"></i>{{ comment.body }}</p>
    </div>
  {% empty %}
    <p class="text-muted"><i class="fas fa-comment-slash me-2"></i> No comments yet. Be the first to comment!</p>
  {% endfor %}

  <hr class="mt-5">
  <h5 class="mb-3">Leave a Comment</h5>
  <form method="post" class="comment-form">
    {% csrf_token %}
    {{ comment_form.body }}
    <button type="submit"><i class="fas fa-paper-plane me-1"></i> Submit</button>
  </form>
</div>




{% endblock %}